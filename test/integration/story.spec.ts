import { expect, chromium } from '@playwright/test';
import test from '../next-fixture'

// test.beforeAll(async () => {
//   const browser = await chromium.launch();
//   const browserContext = await browser.newContext();
//   await browserContext.route('http://api.firstcontributions.com/v1/graphql', route => route.fulfill({
//     status: 200,
//     body: '{"data":{"viewer":{"handle":"Roshanjossey","id":"somerandomId","avatar":"https://avatars.githubusercontent.com/u/8488446?u=e420a14524b2dd93ba8d5cd9709ff8b7cb9002df\u0026v=4","bio":"cool bio dude","gitContributionStats":{"issues":177,"pullRequests":282},"badges":{"edges":[{"node":{"id":"YmFkZ2U6M2FlYTk3NzUtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Python","progressPercentageToNextLevel":48,"currentLevel":3,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFmMTg6M2FlYTk3NzUtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTc4MzgtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"JavaScript","progressPercentageToNextLevel":75,"currentLevel":5,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFmMTg6M2FlYTc4MzgtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTY2YWQtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Ruby","progressPercentageToNextLevel":6,"currentLevel":3,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFiMzA6M2FlYTY2YWQtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTQ5OTItZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Go","progressPercentageToNextLevel":39,"currentLevel":4,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTQ5OTItZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Unix Sell","progressPercentageToNextLevel":62,"currentLevel":1,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"}],"pageInfo":{"endCursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","hasNextPage":true}},"relevantIssues":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPRktXTHhNNU1XUGpl","repositoryAvatar":"https://avatars.githubusercontent.com/u/24965610?v=4","repository":"OpenBeta/open-tacos","title":"Support forward/backward photo navigation using arrow keys","url":"https://github.com/OpenBeta/open-tacos/issues/387","labels":["enhancement","good first issue","help wanted"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMlNF","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Can\'t pause text-to-speech playback once started","url":"https://github.com/ynot4/random-cantonese-date/issues/3","labels":["bug","help wanted","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMktk","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Text to speech voices don\'t work","url":"https://github.com/ynot4/random-cantonese-date/issues/2","labels":["bug","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMkNn","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Possible display scaling issues","url":"https://github.com/ynot4/random-cantonese-date/issues/1","labels":["enhancement","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPQjBva0dNNU1WMGxa","repositoryAvatar":"https://avatars.githubusercontent.com/u/57251745?v=4","repository":"optuna/optuna","title":"Revert changes introduced by PR#3651 after next release of MLFlow","url":"https://github.com/optuna/optuna/issues/3712","labels":["feature","contribution-welcome","good first issue","optuna.integration"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRDNvNUU4NU1WdGxq","repositoryAvatar":"https://avatars.githubusercontent.com/u/64451965?v=4","repository":"TheBrownLab/PhyloFisher","title":"purge.py errors when purging a collapsed taxon","url":"https://github.com/TheBrownLab/PhyloFisher/issues/27","labels":["bug","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR3NJQjZzNU1WY3JB","repositoryAvatar":"https://avatars.githubusercontent.com/u/86418102?v=4","repository":"RibonDAO/interface","title":"Adjust \"Your Giving\" title size to match main pages title sizes","url":"https://github.com/RibonDAO/interface/issues/255","labels":["good first issue","layout adjustment"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRktXTHhNNU1WWTF6","repositoryAvatar":"https://avatars.githubusercontent.com/u/24965610?v=4","repository":"OpenBeta/open-tacos","title":"Update font files","url":"https://github.com/OpenBeta/open-tacos/issues/385","labels":["enhancement","good first issue","help wanted"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR3NJQjZzNU1WWXRY","repositoryAvatar":"https://avatars.githubusercontent.com/u/86418102?v=4","repository":"RibonDAO/interface","title":"Adjustments to card contribution price buttons","url":"https://github.com/RibonDAO/interface/issues/254","labels":["good first issue","layout adjustment"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR2F6dE9NNU1WVW5q","repositoryAvatar":"https://avatars.githubusercontent.com/u/100945830?v=4","repository":"swarmion/swarmion","title":"Use versionned templates in `create-swarmion-app`","url":"https://github.com/swarmion/swarmion/issues/175","labels":["good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjEw","hasNextPage":true}},"issuesFromLastRepo":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPQkJpWTQ4NU1HcXIx","repositoryAvatar":"https://avatars.githubusercontent.com/u/37713493?v=4","repository":"firstcontributions/first-contributions","title":"Adding a comment to the \"Pushing changes to Github\" step.","url":"https://github.com/firstcontributions/first-contributions/issues/50671","labels":[],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPQkJpWTQ4NUU4ckdr","repositoryAvatar":"https://avatars.githubusercontent.com/u/37713493?v=4","repository":"firstcontributions/first-contributions","title":"Resolved issue multiple times. How long to approve? ","url":"https://github.com/firstcontributions/first-contributions/issues/47927","labels":[":beetle: bug","work in progress"],"commentCount":3,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjI=","hasNextPage":true}},"issuesFromOtherRecentRepos":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPRGxMcXBzNUZwbFFZ","repositoryAvatar":"https://avatars.githubusercontent.com/u/60539444?v=4","repository":"jina-ai/jina","title":"Education Resource Finder with faceted search and ratings","url":"https://github.com/jina-ai/jina/issues/4480","labels":["good first issue","Stale"],"commentCount":1,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRGxMcXBzNUZwaU9a","repositoryAvatar":"https://avatars.githubusercontent.com/u/60539444?v=4","repository":"jina-ai/jina","title":"Resource Monitor plus Donation Search Engine","url":"https://github.com/jina-ai/jina/issues/4479","labels":["good first issue","Stale"],"commentCount":1,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjI=","hasNextPage":true}}}}}',
//   }));
// })

// test('basic test', async ({ page }) => {

//   await page.goto('http://app.firstcontributions.com/');
//   const title = page.locator('.navbar__inner .navbar__title');
//   await expect(title).toHaveText('Playwright');
// });

test('book title', async ({ page, port, requestInterceptor, rest }) => {
  // mock the response of the server-side request
  requestInterceptor.use(
    rest.get(`http://api.firstcontributions.com/v1/graphql`, (req, res, ctx) =>
      res(
        ctx.json({
          "data":{"viewer":{"handle":"Roshanjossey","id":"somerandomId","avatar":"https://avatars.githubusercontent.com/u/8488446?u=e420a14524b2dd93ba8d5cd9709ff8b7cb9002df\u0026v=4","bio":"cool bio dude","gitContributionStats":{"issues":177,"pullRequests":282},"badges":{"edges":[{"node":{"id":"YmFkZ2U6M2FlYTk3NzUtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Python","progressPercentageToNextLevel":48,"currentLevel":3,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFmMTg6M2FlYTk3NzUtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTc4MzgtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"JavaScript","progressPercentageToNextLevel":75,"currentLevel":5,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFmMTg6M2FlYTc4MzgtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTY2YWQtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Ruby","progressPercentageToNextLevel":6,"currentLevel":3,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDFiMzA6M2FlYTY2YWQtZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTQ5OTItZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Go","progressPercentageToNextLevel":39,"currentLevel":4,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTQ5OTItZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"},{"node":{"id":"YmFkZ2U6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","displayName":"Unix Sell","progressPercentageToNextLevel":62,"currentLevel":1,"__typename":"Badge"},"cursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2"}],"pageInfo":{"endCursor":"Y3Vyc29yOnYxOjVlMGY3YjcyNDE3NDg6M2FlYTJiNzctZTc3Zi0xMWVjLWEwMGUtMDI0MmFjMWUwMTA2","hasNextPage":true}},"relevantIssues":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPRktXTHhNNU1XUGpl","repositoryAvatar":"https://avatars.githubusercontent.com/u/24965610?v=4","repository":"OpenBeta/open-tacos","title":"Support forward/backward photo navigation using arrow keys","url":"https://github.com/OpenBeta/open-tacos/issues/387","labels":["enhancement","good first issue","help wanted"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMlNF","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Can\'t pause text-to-speech playback once started","url":"https://github.com/ynot4/random-cantonese-date/issues/3","labels":["bug","help wanted","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMktk","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Text to speech voices don\'t work","url":"https://github.com/ynot4/random-cantonese-date/issues/2","labels":["bug","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPSGhyaXNzNU1WMkNn","repositoryAvatar":"https://avatars.githubusercontent.com/u/98645055?u=1aadc29ff83116097e35ae815f04bac4bcab275d\u0026v=4","repository":"ynot4/random-cantonese-date","title":"Possible display scaling issues","url":"https://github.com/ynot4/random-cantonese-date/issues/1","labels":["enhancement","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPQjBva0dNNU1WMGxa","repositoryAvatar":"https://avatars.githubusercontent.com/u/57251745?v=4","repository":"optuna/optuna","title":"Revert changes introduced by PR#3651 after next release of MLFlow","url":"https://github.com/optuna/optuna/issues/3712","labels":["feature","contribution-welcome","good first issue","optuna.integration"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRDNvNUU4NU1WdGxq","repositoryAvatar":"https://avatars.githubusercontent.com/u/64451965?v=4","repository":"TheBrownLab/PhyloFisher","title":"purge.py errors when purging a collapsed taxon","url":"https://github.com/TheBrownLab/PhyloFisher/issues/27","labels":["bug","good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR3NJQjZzNU1WY3JB","repositoryAvatar":"https://avatars.githubusercontent.com/u/86418102?v=4","repository":"RibonDAO/interface","title":"Adjust \"Your Giving\" title size to match main pages title sizes","url":"https://github.com/RibonDAO/interface/issues/255","labels":["good first issue","layout adjustment"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRktXTHhNNU1WWTF6","repositoryAvatar":"https://avatars.githubusercontent.com/u/24965610?v=4","repository":"OpenBeta/open-tacos","title":"Update font files","url":"https://github.com/OpenBeta/open-tacos/issues/385","labels":["enhancement","good first issue","help wanted"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR3NJQjZzNU1WWXRY","repositoryAvatar":"https://avatars.githubusercontent.com/u/86418102?v=4","repository":"RibonDAO/interface","title":"Adjustments to card contribution price buttons","url":"https://github.com/RibonDAO/interface/issues/254","labels":["good first issue","layout adjustment"],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPR2F6dE9NNU1WVW5q","repositoryAvatar":"https://avatars.githubusercontent.com/u/100945830?v=4","repository":"swarmion/swarmion","title":"Use versionned templates in `create-swarmion-app`","url":"https://github.com/swarmion/swarmion/issues/175","labels":["good first issue"],"commentCount":0,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjEw","hasNextPage":true}},"issuesFromLastRepo":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPQkJpWTQ4NU1HcXIx","repositoryAvatar":"https://avatars.githubusercontent.com/u/37713493?v=4","repository":"firstcontributions/first-contributions","title":"Adding a comment to the \"Pushing changes to Github\" step.","url":"https://github.com/firstcontributions/first-contributions/issues/50671","labels":[],"commentCount":0,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPQkJpWTQ4NUU4ckdr","repositoryAvatar":"https://avatars.githubusercontent.com/u/37713493?v=4","repository":"firstcontributions/first-contributions","title":"Resolved issue multiple times. How long to approve? ","url":"https://github.com/firstcontributions/first-contributions/issues/47927","labels":[":beetle: bug","work in progress"],"commentCount":3,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjI=","hasNextPage":true}},"issuesFromOtherRecentRepos":{"edges":[{"node":{"id":"aXNzdWU6SV9rd0RPRGxMcXBzNUZwbFFZ","repositoryAvatar":"https://avatars.githubusercontent.com/u/60539444?v=4","repository":"jina-ai/jina","title":"Education Resource Finder with faceted search and ratings","url":"https://github.com/jina-ai/jina/issues/4480","labels":["good first issue","Stale"],"commentCount":1,"__typename":"Issue"},"cursor":""},{"node":{"id":"aXNzdWU6SV9rd0RPRGxMcXBzNUZwaU9a","repositoryAvatar":"https://avatars.githubusercontent.com/u/60539444?v=4","repository":"jina-ai/jina","title":"Resource Monitor plus Donation Search Engine","url":"https://github.com/jina-ai/jina/issues/4479","labels":["good first issue","Stale"],"commentCount":1,"__typename":"Issue"},"cursor":""}],"pageInfo":{"endCursor":"Y3Vyc29yOjI=","hasNextPage":true}}}}
        })
      )
    )
  )
  await page.goto(`app.firstcontributions.com`)
  const name = await page.innerText('h1')
  expect(name).toBe('Lord of the Rings')
})